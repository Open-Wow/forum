<!doctype html>
<html dir="ltr" lang="fr">
<head>
<meta charset="utf-8">
<title>SpellScript : le sort &quot;Eclat lunaire&quot; - Open WoW</title>
<link rel="stylesheet" href="../assets/forum-b586aac9.css">
<link rel="canonical" href="70-spellscript-le-sort-eclat-lunaire.html">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
<meta name="description" content="Le forum francophone d&#039;émulation WoW.">
<meta name="theme-color" content="#4D698E">
<link rel="shortcut icon" href="../assets/favicon-19klahq3.png">
<script src="https://www.recaptcha.net/recaptcha/api.js?hl=fr&render=explicit" async defer></script>
</head>
<body>
<div id="app" class="App">
<div id="app-navigation" class="App-navigation"></div>
<div id="drawer" class="App-drawer">
<header id="header" class="App-header">
<div id="header-navigation" class="Header-navigation"></div>
<div class="container">
<h1 class="Header-title">
<a href="https://forum.open-wow.eu" id="home-link">
<img src="../assets/logo-fje1vtuv.png" alt="Open WoW" class="Header-logo">
</a>
</h1>
<div id="header-primary" class="Header-primary"></div>
<div id="header-secondary" class="Header-secondary"></div>
</div>
</header>
</div>
<main class="App-content">
<div id="content"></div>
<div id="flarum-loading" style="display: none">
Chargement…
</div>
<noscript>
    <div class="Alert">
        <div class="container">
            Ce site est optimisé pour être consulté depuis un navigateur moderne dans lequel JavaScript est activé.
        </div>
    </div>
</noscript>
<div id="flarum-loading-error" style="display: none">
<div class="Alert">
<div class="container">
Une erreur est survenue lors de la tentative de chargement de la version complète de ce site. Veuillez purger le cache de votre navigateur et rafraîchir cette page pour tenter de corriger cette erreur.
</div>
</div>
</div>
<noscript id="flarum-content">
    <div class="container">
    <h2>SpellScript : le sort &quot;Eclat lunaire&quot;</h2>

    <div>
                    <div>
                                <h3>iThorgrim</h3>
                <div class="Post-body">
                    <h1><strong>SpellScript : le sort "Eclat lunaire"</strong></h1>

<h2>Tutoriel par <a href="https://forum.open-wow.eu/u/Galathil" class="UserMention">@Galathil</a></h2>

<p>Ceci étant mes premiers pas dans les SpellScript, il se peut que le code ne soit pas totalement correct et les explications imprécises.</p>

<p>Lecteurs avertis, soyez indulgents et préférez m'expliquer en privé pour rendre ce tuto plus clair par la suite.</p>

<p>Développement d'un SpellScript : Eclat Lunaire</p>

<p><em>Sommaire :</em></p>

<ul><li>Introduction</li>
<li>Symptômes</li>
<li>La recherche d'informations</li>
<li>Le script</li>
<li>Explications</li>
<li>Remerciements</li>
<li>Aide, idées, suggestions, critiques</li></ul>
  <br>

<h3>Introduction</h3>

<p>Ce tutoriel vise à vous donner quelques bonnes pratiques afin de réaliser vos SpellScript au travers d'un exemple.</p>

<p>La démarche de réalisation est toute aussi importante que le résultat final, soyez attentifs.</p>

<p>La version de TrinityCore utilisée est la suivante : <a href="https://github.com/TrinityCore/TrinityCore/releases/tag/6.2.3%2F20886" rel=" nofollow ugc">TrinityCore 6.2.3</a></p>

<h3>Symptômes</h3>

<p>Ceci est un rapport que vous pouvez recevoir d'un joueur :</p>

<pre><code>Bonjour,

Le sort "Eclat Lunaire" de mon druide ne fonctionne pas. Je choppe bien l'aggro de la créature mais le dot n'est pas appliqué. De même, le cout en mana n'est pas débité.

Bien cordialement,
un joueur</code><script async="" crossorigin="anonymous" data-hljs-style="github-gist" integrity="sha384-eud4nQrKZMwcYak7or3J5ZPJx1x4HRe8iTTHJy1SUVrDD+fP30Bo/F8OSdQJpk8d" onload="hljsLoader.highlightBlocks(this.parentNode)" src="https://cdn.jsdelivr.net/gh/s9e/hljs-loader@1.0.18/loader.min.js"></script></pre>

<h3>La recherche d'informations</h3>

<p>A première vue, il semble que le sort ne soit pas traité par le serveur ou partiellement ! Nous allons repérer l'ID du sort concerné.Pour cela deux méthodes :</p>

<ul><li><p><strong>wowhead </strong>: On recherche les sorts du druide pour isoler "Eclat Lunaire", l'id se trouve dans l'url</p></li>
  
<li><p><strong>Commande lookup</strong> : Sur un personnage druide avec le sort de connu, grâce à la commande ".lookup spell Eclat lunaire". L'un des ids portera la notion "know", c'est celui que l'on recherche.</p></li></ul>
  <br>

<p>Dans les deux cas, nous tombons sur un premier id : &lt;mark&gt;8921&lt;/mark&gt;.</p>

<p>Pour savoir si le sort est déjà traité par le core (ou tout au moins une portion) faites une recherche dans les sources avec les mots clefs "moonfire" ou "&lt;mark&gt;8921&lt;/mark&gt;". De même, recherchez dans la table <strong>world.spell_script_names</strong>.</p>

<p>Vous ne trouverez rien de concluant.</p>

<p>Pour avoir un peu plus d'informations sur le sort, nous allons utiliser **SpellWork **proposé par TrinityCore ici : <a href="https://github.com/TrinityCore/spellwork_cs" rel=" nofollow ugc">SpellWork</a> .</p>

<p>Il vous suffit de lancer la solution "SpellWork.sln" et de la générer (Nécessite Visual Studio 2015 si vous êtes sous Windows).</p>

<p>L'exécutable sera positionné dans "bin/debug".<br>
Au démarrage, sélectionnez le dossier de vos "DBC/votre_langue".</p>

<p>En effectuant une recherche sur l'id de sort &lt;mark&gt;8921&lt;/mark&gt;, nous obtenons un tas d'informations dans la colonne de gauche.Vous pouvez observer que le sort à un effet DUMMY, c'est à dire qu'il ne fait rien du tout lui même (en bas du cadre).</p>

<p>En regardant de plus prêt la description du sort, on peut voir un autre ID apparaitre : &lt;mark&gt;164812&lt;/mark&gt; qui semble être le bon sort !</p>

<p><strong>Comment être sûr de cela?</strong></p>

<p>En jeu, sélectionnez un monstre et tapez la commande ".cast id_du_sort" pour tester les deux ids. Observez comme 164812 semble faire le job, c'est tout bon !</p>

<p>Nous allons maintenant créer notre SpellScript !</p>

<h3>Le script</h3>

<p>Script à ajouter dans "\src\server\scripts\Spells\spell_druid.cpp" :</p>

<pre><code class="language-cpp">// 8921 - Moonfire (Dummy)
class spell_dru_moonfire : public SpellScriptLoader
{
public:
spell_dru_moonfire() : SpellScriptLoader("spell_dru_moonfire") { }

class spell_dru_moonfire_SpellScript : public SpellScript
{
PrepareSpellScript(spell_dru_moonfire_SpellScript);

enum
{
SPELL_DRUID_MOONFIRE_DAMAGE = 164812
};

bool Load() override
{
if (GetCaster() &amp;&amp; GetCaster()-&gt;GetTypeId() != TYPEID_PLAYER)
return false;

return true;
}

void HandleOnHit()
{
Unit* caster = GetCaster();
Unit* target = GetHitUnit();

if (!caster || !target)
return;

caster-&gt;CastSpell(target, SPELL_DRUID_MOONFIRE_DAMAGE, true);
}

void Register() override
{
OnHit += SpellHitFn(spell_dru_moonfire_SpellScript::HandleOnHit);
}
};

SpellScript* GetSpellScript() const override
{
return new spell_dru_moonfire_SpellScript();
}
};</code><script async="" crossorigin="anonymous" data-hljs-style="github-gist" integrity="sha384-eud4nQrKZMwcYak7or3J5ZPJx1x4HRe8iTTHJy1SUVrDD+fP30Bo/F8OSdQJpk8d" onload="hljsLoader.highlightBlocks(this.parentNode)" src="https://cdn.jsdelivr.net/gh/s9e/hljs-loader@1.0.18/loader.min.js"></script></pre>

<p>N'oubliez pas d'ajouter l'initialisation tout en bas du fichier (pour que le core charge bien le script !)</p>

<pre><code class="language-cpp">void AddSC_druid_spell_scripts()
{
(...)
new spell_dru_moonfire();
(...)
}</code><script async="" crossorigin="anonymous" data-hljs-style="github-gist" integrity="sha384-eud4nQrKZMwcYak7or3J5ZPJx1x4HRe8iTTHJy1SUVrDD+fP30Bo/F8OSdQJpk8d" onload="hljsLoader.highlightBlocks(this.parentNode)" src="https://cdn.jsdelivr.net/gh/s9e/hljs-loader@1.0.18/loader.min.js"></script></pre>

<p>Enfin, pour que le core puisse lier votre script au sort &lt;mark&gt;8921&lt;/mark&gt;, ajoutez une ligne dans la table <strong>world.spell_script_names</strong> :</p>

<pre><code class="language-sql">REPLACE INTO `spell_script_names` (`spell_id`, `ScriptName`) VALUES (8921, 'spell_dru_moonfire');</code><script async="" crossorigin="anonymous" data-hljs-style="github-gist" integrity="sha384-eud4nQrKZMwcYak7or3J5ZPJx1x4HRe8iTTHJy1SUVrDD+fP30Bo/F8OSdQJpk8d" onload="hljsLoader.highlightBlocks(this.parentNode)" src="https://cdn.jsdelivr.net/gh/s9e/hljs-loader@1.0.18/loader.min.js"></script></pre>

<p>Vous ne comprenez rien? Pas de soucis, passons à l'explication.</p>

<h3>Explications</h3>

<p>Dans cette partie, nous allons analyser le code composé précédemment :</p>

<ul><li><p><strong>La structure globale</strong> : Comme vous le voyez, nous avons une première classe héritant de SpellScriptLoader et une classe interne héritant de SpellScript. Cette architecture au premier abord déroutante vise à simplifier les choses dans le cas ou il faudrait ajouter un AuraScript associé au SpellScript. Dans ce cas il suffira de créer une seconde classe interne.</p></li>
  
<li><p><strong>Aura ou SpellScript ?</strong> Un SpellScript est un script de sort simple sans effet de durée (dot ou buff), contrairement à un AuraScript qui donne accès à des méthodes pour gérer les sors sur la durée.</p></li>
  
<li><p><strong>Le constructeur</strong> : construction de l'objet parent en indiquant le nom de la classe enfant.</p></li>
  
<li><p><strong>L'enum</strong> : De manière générale, quand on manipule des ids, il est commun d'utiliser des ENUM, cela rend le code plus lisible et si l'id change, vous ne le changez qu'a un seul endroit dans le code !</p></li>
  
<li><p><strong>Méthode load()</strong> : doit retourner un booléen pour déterminer si toutes les conditions requises sont réunies pour exécuter le script. Ici, nous vérifions que le lanceur de sort est bien un joueur.</p></li>
  
<li><p><strong>Méthode HandleOnHit()</strong> : le nom de la méthode importe peu, vous verrez pourquoi plus bas. On va tout simplement lancer le bon sort (164812) sur la victime qui est la cible sélectionnée. Notez que l'on vérifie l'existence des pointeurs, c'est plus propre et évite les exceptions et donc un crash potentiel du serveur.</p></li>
  
<li><p><strong>Méthode register()</strong> : comme son nom l'indique, elle enregistre la pile d'évènements à lancer. On demande donc d'ajouter la méthode précédemment créé à la pile d'appel "onHit".</p></li>
  
<li><p><strong>Méthode GetSpellScript()</strong> : qui est simplement le point d'appel pour instancier notre classe interne. Nécessaire pour le SpellScriptLoader.</p></li></ul>
  <br>

<ul><li><p>On ajoute l'instanciation de la classe tout en bas de "spell_druid.cpp", sans quoi votre code ne sera jamais chargé !</p></li>
  
<li><p>On ajoute une ligne dans la table <strong>world.spell_script_names</strong> pour indiquer au serveur de lancer notre script quand le sort "Eclat lunaire" est appelé.</p></li>
  
<li><p>Compilez, testez et admirez le résultat !</p></li> </ul>
  <br>

<h3>Remerciements</h3>

<p>Je remercie chaleureusement @Traesh pour son aide et ses conseils qui m'ont permis de développer ce script et vous le proposer ici.</p>

<h3>Aide, idées, suggestions, critiques</h3>

<p>Si vous avez des soucis avec le script, merci de créer une demande d'aide dans la section appropriée, en indiquant que vous avez suivi ce tutoriel.</p>

<p>Pour les idées, suggestions et critiques, préférez me contacter par MP? j'éditerai le tutoriel en conséquence.</p>

<p>Encore une fois, ce sont mes premiers pas, soyez indulgents !</p>
                </div>
            </div>

            <hr>
            </div>

    
    </div>

</noscript>
<div class="App-composer">
 <div class="container">
<div id="composer"></div>
</div>
</div>
</main>
</div>
<div id="modal"></div>
<div id="alerts"></div>
<script>
            document.getElementById('flarum-loading').style.display = 'block';
            var flarum = {extensions: {}};
        </script>
<script src="../assets/forum-2c55cc91.js"></script>
<script src="../assets/forum-fr-b93474b7.js"></script>
<script>
            document.getElementById('flarum-loading').style.display = 'none';

            try {
                flarum.core.app.load({"resources":[{"type":"forums","id":"1","attributes":{"title":"Open WoW","description":"Le forum francophone d\u0027\u00e9mulation WoW.","showLanguageSelector":true,"baseUrl":"https:\/\/forum.open-wow.eu","basePath":"","debug":false,"apiUrl":"https:\/\/forum.open-wow.eu\/api","welcomeTitle":"Bienvene sur Open WoW","welcomeMessage":"Le forum francophone d\u0027\u00e9mulation WoW.","themePrimaryColor":"#4D698E","themeSecondaryColor":"#4D698E","logoUrl":"https:\/\/forum.open-wow.eu\/assets\/logo-fje1vtuv.png","faviconUrl":"https:\/\/forum.open-wow.eu\/assets\/favicon-19klahq3.png","headerHtml":null,"footerHtml":null,"allowSignUp":true,"defaultRoute":"\/all","canViewDiscussions":true,"canStartDiscussion":true,"canViewUserList":false,"canViewFlags":false,"guidelinesUrl":null,"minPrimaryTags":"1","maxPrimaryTags":"1","minSecondaryTags":"0","maxSecondaryTags":"99","canSeeUserDirectoryLink":false,"userDirectoryDefaultSort":"username_az","darkMode":true,"categories.keepTagsNav":false,"categories.fullPageDesktop":false,"categories.compactMobile":false,"categories.parentRemoveIcon":false,"categories.parentRemoveDescription":false,"categories.parentRemoveStats":false,"categories.parentRemoveLastDiscussion":false,"categories.childBareIcon":false,"emojioneAreaEnableSearch":true,"emojioneAreaEnableRecent":true,"emojioneAreaEnableTones":true,"emojioneAreaFiltersPositionBottom":false,"emojioneAreaSearchPositionBottom":false,"emojioneAreaHideFlarumButton":true},"relationships":{"groups":{"data":[{"type":"groups","id":"1"},{"type":"groups","id":"2"},{"type":"groups","id":"3"},{"type":"groups","id":"4"}]},"tags":{"data":[{"type":"tags","id":"1"},{"type":"tags","id":"2"},{"type":"tags","id":"3"},{"type":"tags","id":"9"},{"type":"tags","id":"10"},{"type":"tags","id":"11"},{"type":"tags","id":"12"},{"type":"tags","id":"13"},{"type":"tags","id":"14"},{"type":"tags","id":"15"},{"type":"tags","id":"16"},{"type":"tags","id":"17"},{"type":"tags","id":"18"},{"type":"tags","id":"19"},{"type":"tags","id":"20"},{"type":"tags","id":"21"},{"type":"tags","id":"23"},{"type":"tags","id":"24"},{"type":"tags","id":"25"},{"type":"tags","id":"26"},{"type":"tags","id":"27"},{"type":"tags","id":"28"},{"type":"tags","id":"29"},{"type":"tags","id":"30"},{"type":"tags","id":"31"},{"type":"tags","id":"32"},{"type":"tags","id":"33"},{"type":"tags","id":"34"},{"type":"tags","id":"35"},{"type":"tags","id":"36"},{"type":"tags","id":"37"},{"type":"tags","id":"38"},{"type":"tags","id":"39"},{"type":"tags","id":"40"},{"type":"tags","id":"42"},{"type":"tags","id":"43"}]}}},{"type":"groups","id":"1","attributes":{"nameSingular":"Administrateur","namePlural":"Administrateurs","color":"#B72A2A","icon":"fas fa-wrench","isHidden":0}},{"type":"groups","id":"2","attributes":{"nameSingular":"Invit\u00e9","namePlural":"Invit\u00e9s","color":null,"icon":null,"isHidden":0}},{"type":"groups","id":"3","attributes":{"nameSingular":"Membre","namePlural":"Membres","color":null,"icon":null,"isHidden":0}},{"type":"groups","id":"4","attributes":{"nameSingular":"Mod\u00e9rateur","namePlural":"Mod\u00e9rateurs","color":"#80349E","icon":"fas fa-bolt","isHidden":0}},{"type":"tags","id":"1","attributes":{"name":"General","description":null,"slug":"general","color":"#888","backgroundUrl":null,"backgroundMode":null,"icon":null,"discussionCount":0,"position":0,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":null,"canStartDiscussion":false,"canAddToDiscussion":false,"postCount":0}},{"type":"tags","id":"2","attributes":{"name":"Tutoriels","description":"","slug":"tutoriels","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":52,"position":2,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-18T21:19:28+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":47},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"70"}}}},{"type":"tags","id":"3","attributes":{"name":"Partages","description":"","slug":"partagess","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":29,"position":3,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-12T15:47:42+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":29},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"56"}}}},{"type":"tags","id":"9","attributes":{"name":"Support","description":"","slug":"support","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":1,"position":4,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-01-04T17:18:38+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":8},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"28"}}}},{"type":"tags","id":"10","attributes":{"name":"C++","description":"","slug":"tuto-cpp","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":10,"position":1,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":"2021-02-18T21:19:28+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":7},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"70"}},"parent":{"data":{"type":"tags","id":"2"}}}},{"type":"tags","id":"11","attributes":{"name":"Lua","description":"","slug":"tuto-lua","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":6,"position":2,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":"2021-02-18T21:11:18+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":6},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"62"}},"parent":{"data":{"type":"tags","id":"2"}}}},{"type":"tags","id":"12","attributes":{"name":"SQL","description":"","slug":"tuto-sql","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":11,"position":4,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":"2021-02-18T21:17:59+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":11},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"69"}},"parent":{"data":{"type":"tags","id":"2"}}}},{"type":"tags","id":"13","attributes":{"name":"Vanilla","description":"","slug":"vanilla","color":"#f39c12","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":12,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-01-07T13:34:50+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":13},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"31"}}}},{"type":"tags","id":"14","attributes":{"name":"The Burning Crusade","description":"","slug":"the-burning-crusade","color":"#f39c12","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":13,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-12T15:47:42+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":14},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"56"}}}},{"type":"tags","id":"15","attributes":{"name":"Wrath of the Lich King","description":"","slug":"wrath-of-the-lich-king","color":"#f39c12","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":24,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-18T21:04:05+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":27},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"57"}}}},{"type":"tags","id":"16","attributes":{"name":"Cataclysm","description":"","slug":"cataclysm","color":"#f39c12","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":3,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-12T15:47:42+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":3},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"56"}}}},{"type":"tags","id":"17","attributes":{"name":"Mists of Pandaria","description":"","slug":"mists-of-pandaria","color":"#f39c12","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":2,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-12T15:47:42+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":2},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"56"}}}},{"type":"tags","id":"18","attributes":{"name":"Warlords of Draenor","description":"","slug":"warlords-of-draenor","color":"#f39c12","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":2,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-12T15:47:42+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":2},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"56"}}}},{"type":"tags","id":"19","attributes":{"name":"Legion","description":"","slug":"legion","color":"#f39c12","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":2,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-12T15:47:42+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":2},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"56"}}}},{"type":"tags","id":"20","attributes":{"name":"Battle for Azeroth","description":"","slug":"battle-for-azeroth","color":"#f39c12","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":2,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-12T15:47:42+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":2},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"56"}}}},{"type":"tags","id":"21","attributes":{"name":"Shadowlands","description":"","slug":"shadowlands","color":"#f39c12","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":3,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-12T15:47:42+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":3},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"56"}}}},{"type":"tags","id":"23","attributes":{"name":"TrinityCore","description":"","slug":"trinitycore","color":"#9b59b6","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":26,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-18T21:04:05+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":25},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"57"}}}},{"type":"tags","id":"24","attributes":{"name":"MaNGOS","description":"","slug":"mangos","color":"#9b59b6","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":10,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-12T15:47:42+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":12},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"56"}}}},{"type":"tags","id":"25","attributes":{"name":"AzerothCore","description":"","slug":"azerothcore","color":"#9b59b6","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":19,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-12T15:47:42+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":17},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"56"}}}},{"type":"tags","id":"26","attributes":{"name":"Skyfire","description":"","slug":"skyfire","color":"#9b59b6","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":3,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-01-05T13:08:13+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":2},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"30"}}}},{"type":"tags","id":"27","attributes":{"name":"Oregoncore","description":"","slug":"oregoncore","color":"#9b59b6","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":7,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-01-07T13:34:50+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":10},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"31"}}}},{"type":"tags","id":"28","attributes":{"name":"C++","description":"","slug":"cplusplus","color":"#2e86c1","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":2,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-01-09T16:29:34+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":3},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"42"}}}},{"type":"tags","id":"29","attributes":{"name":"SQL","description":"","slug":"sql","color":"#2e86c1","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":9,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-01-09T16:29:34+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":9},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"42"}}}},{"type":"tags","id":"30","attributes":{"name":"Lua","description":"","slug":"lua","color":"#2e86c1","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":15,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-01-18T11:03:06+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":15},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"52"}}}},{"type":"tags","id":"31","attributes":{"name":"PHP","description":"","slug":"php","color":"#2e86c1","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":0,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":null,"canStartDiscussion":false,"canAddToDiscussion":false,"postCount":0}},{"type":"tags","id":"32","attributes":{"name":"C++","description":"","slug":"rel-cpp","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":1,"position":1,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":"2021-01-03T18:14:57+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":1},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"26"}},"parent":{"data":{"type":"tags","id":"3"}}}},{"type":"tags","id":"33","attributes":{"name":"Lua","description":"","slug":"rel-lua","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":11,"position":2,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":"2021-01-23T20:31:12+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":10},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"54"}},"parent":{"data":{"type":"tags","id":"3"}}}},{"type":"tags","id":"34","attributes":{"name":"SQL","description":"","slug":"rel-sql","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":6,"position":4,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":"2021-01-09T19:51:41+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":6},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"50"}},"parent":{"data":{"type":"tags","id":"3"}}}},{"type":"tags","id":"35","attributes":{"name":"GIT","description":"","slug":"git","color":"#2e86c1","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":1,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2020-12-31T12:21:21+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":1},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"8"}}}},{"type":"tags","id":"36","attributes":{"name":"windows","description":"","slug":"windows","color":"#27ae60","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":4,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-18T21:04:05+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":7},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"57"}}}},{"type":"tags","id":"37","attributes":{"name":"Linux","description":"","slug":"linux","color":"#27ae60","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":4,"position":null,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-18T21:04:05+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":5},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"57"}}}},{"type":"tags","id":"38","attributes":{"name":"Guides","description":"","slug":"guides","color":"#00FFF7","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":2,"position":1,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-13T21:59:45+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":6},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"20"}}}},{"type":"tags","id":"39","attributes":{"name":"Autres","description":"","slug":"tuto-autres","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":2,"position":0,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":"2021-02-03T20:18:27+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":2},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"55"}},"parent":{"data":{"type":"tags","id":"2"}}}},{"type":"tags","id":"40","attributes":{"name":"Autres","description":"","slug":"rel-autres","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":5,"position":0,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":"2021-01-27T08:52:01+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":6},"relationships":{"lastPostedDiscussion":{"data":{"type":"discussions","id":"53"}},"parent":{"data":{"type":"tags","id":"3"}}}},{"type":"tags","id":"42","attributes":{"name":"Model-changing","description":"","slug":"tuto-model-changing","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":0,"position":3,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":null,"canStartDiscussion":false,"canAddToDiscussion":false,"postCount":0},"relationships":{"parent":{"data":{"type":"tags","id":"2"}}}},{"type":"tags","id":"43","attributes":{"name":"Model-Changing","description":"","slug":"rel-model-changing","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":0,"position":3,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":null,"canStartDiscussion":false,"canAddToDiscussion":false,"postCount":0},"relationships":{"parent":{"data":{"type":"tags","id":"3"}}}},{"type":"discussions","id":"70","attributes":{"title":"SpellScript : le sort \u0022Eclat lunaire\u0022","slug":"70-spellscript-le-sort-eclat-lunaire","commentCount":1,"participantCount":1,"createdAt":"2021-02-18T21:19:28+00:00","lastPostedAt":"2021-02-18T21:19:28+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"2"}}}},{"type":"discussions","id":"56","attributes":{"title":"WoW Admin Panel Prenium","slug":"56-wow-admin-panel-prenium","commentCount":1,"participantCount":1,"createdAt":"2021-02-12T15:47:42+00:00","lastPostedAt":"2021-02-12T15:47:42+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"19"}}}},{"type":"discussions","id":"28","attributes":{"title":"Comment extraire les Vmaps sur des donjons modifier ?","slug":"28-comment-extraire-les-vmaps-sur-des-donjons-modifier","commentCount":8,"participantCount":4,"createdAt":"2021-01-03T22:30:02+00:00","lastPostedAt":"2021-01-04T19:13:07+00:00","lastPostNumber":8,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"8"}}}},{"type":"discussions","id":"62","attributes":{"title":"Stocker des informations avec Eluna","slug":"62-stocker-des-informations-avec-eluna","commentCount":1,"participantCount":1,"createdAt":"2021-02-18T21:11:18+00:00","lastPostedAt":"2021-02-18T21:11:18+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"2"}}}},{"type":"discussions","id":"69","attributes":{"title":"Phase des maps en 6x","slug":"69-phase-des-maps-en-6x","commentCount":1,"participantCount":1,"createdAt":"2021-02-18T21:17:59+00:00","lastPostedAt":"2021-02-18T21:17:59+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"2"}}}},{"type":"discussions","id":"31","attributes":{"title":"LIC - Lua Icons Chat","slug":"31-lic-lua-icons-chat","commentCount":1,"participantCount":1,"createdAt":"2021-01-07T13:34:50+00:00","lastPostedAt":"2021-01-07T13:34:50+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"2"}}}},{"type":"discussions","id":"57","attributes":{"title":"Anti_Farm","slug":"57-anti-farm","commentCount":2,"participantCount":2,"createdAt":"2021-02-18T21:04:05+00:00","lastPostedAt":"2021-02-18T21:08:49+00:00","lastPostNumber":4,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"13"}}}},{"type":"discussions","id":"30","attributes":{"title":"Modifier la distance de vue","slug":"30-modifier-la-distance-de-vue","commentCount":1,"participantCount":1,"createdAt":"2021-01-05T13:08:13+00:00","lastPostedAt":"2021-01-05T13:08:13+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"2"}}}},{"type":"discussions","id":"42","attributes":{"title":"Les Bitmasks - Fonctionnement et Exemples","slug":"42-les-bitmasks-fonctionnement-et-exemples","commentCount":2,"participantCount":2,"createdAt":"2021-01-09T16:29:34+00:00","lastPostedAt":"2021-02-12T20:57:11+00:00","lastPostNumber":2,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"13"}}}},{"type":"discussions","id":"52","attributes":{"title":"Texture Coords Calculator","slug":"52-texture-coords-calculator","commentCount":1,"participantCount":1,"createdAt":"2021-01-18T11:03:06+00:00","lastPostedAt":"2021-01-18T11:03:06+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"2"}}}},{"type":"discussions","id":"26","attributes":{"title":"Activer les races alli\u00e9es ","slug":"26-activer-les-races-alliees","commentCount":1,"participantCount":1,"createdAt":"2021-01-03T18:14:57+00:00","lastPostedAt":"2021-01-03T18:14:57+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"1"}}}},{"type":"discussions","id":"54","attributes":{"title":"[AddOn] TrinityAdmin","slug":"54-addon-trinityadmin","commentCount":1,"participantCount":1,"createdAt":"2021-01-23T20:31:12+00:00","lastPostedAt":"2021-01-23T20:31:12+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"15"}}}},{"type":"discussions","id":"50","attributes":{"title":"Gameobject Paramystick","slug":"50-gameobject-paramystick","commentCount":1,"participantCount":1,"createdAt":"2021-01-09T19:51:41+00:00","lastPostedAt":"2021-01-09T19:51:41+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"1"}}}},{"type":"discussions","id":"8","attributes":{"title":"Cloner une version particuli\u00e8re de TrinityCore","slug":"8-cloner-une-version-particuliere-de-trinitycore","commentCount":1,"participantCount":1,"createdAt":"2020-12-31T12:21:21+00:00","lastPostedAt":"2020-12-31T12:21:21+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"1"}}}},{"type":"discussions","id":"20","attributes":{"title":"Apprendre le Lua : Session #2","slug":"20-apprendre-le-lua-session-2","commentCount":4,"participantCount":2,"createdAt":"2020-12-31T17:23:56+00:00","lastPostedAt":"2021-02-18T21:02:03+00:00","lastPostNumber":4,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"2"}}}},{"type":"discussions","id":"55","attributes":{"title":"Cr\u00e9er une nouvelle Map","slug":"55-creer-une-nouvelle-map","commentCount":1,"participantCount":1,"createdAt":"2021-02-03T20:18:27+00:00","lastPostedAt":"2021-02-03T20:18:27+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"18"}}}},{"type":"discussions","id":"53","attributes":{"title":"WoW Client Manager","slug":"53-wow-client-manager","commentCount":3,"participantCount":2,"createdAt":"2021-01-20T20:08:53+00:00","lastPostedAt":"2021-01-27T16:51:32+00:00","lastPostNumber":3,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"lastPostedUser":{"data":{"type":"users","id":"1"}}}},{"type":"users","id":"2","attributes":{"username":"iThorgrim","displayName":"iThorgrim","avatarUrl":"https:\/\/forum.open-wow.eu\/assets\/avatars\/m2uNfA3ykacYo3KQ.png","slug":"iThorgrim","joinTime":null}},{"type":"users","id":"19","attributes":{"username":"Torvahal","displayName":"Torvahal","avatarUrl":"https:\/\/forum.open-wow.eu\/assets\/avatars\/Zj382QMdGN5T05KR.png","slug":"Torvahal","joinTime":null}},{"type":"users","id":"8","attributes":{"username":"Shard","displayName":"Shard","avatarUrl":"https:\/\/forum.open-wow.eu\/assets\/avatars\/bYoQgxVXNpTYgA1Z.png","slug":"Shard","joinTime":null}},{"type":"users","id":"13","attributes":{"username":"noc","displayName":"noc","avatarUrl":null,"slug":"noc","joinTime":null}},{"type":"users","id":"1","attributes":{"username":"Galathil","displayName":"Galathil","avatarUrl":"https:\/\/forum.open-wow.eu\/assets\/avatars\/6zjneQm6RzYl44hc.png","slug":"Galathil","joinTime":null}},{"type":"users","id":"15","attributes":{"username":"Mageex","displayName":"Mageex","avatarUrl":"https:\/\/forum.open-wow.eu\/assets\/avatars\/QrVwmaDacwoX2c40.png","slug":"Mageex","joinTime":null}},{"type":"users","id":"18","attributes":{"username":"Nehyren","displayName":"Nehyren","avatarUrl":"https:\/\/forum.open-wow.eu\/assets\/avatars\/JTiwGMIn9vWbQRVE.png","slug":"Nehyren","joinTime":null}}],"session":{"userId":0,"csrfToken":"WGJttZA5GW00zvY277kzI807dszMLaMQ7waNTHW0"},"locales":{"fr":"Fran\u00e7ais","en":"English"},"locale":"fr","fof-recaptcha.credentials.site":"6LfKZhoaAAAAALSGOmOPpIVRVM8XRksALQXeFtYW","fof-recaptcha.type":"","apiDocument":{"data":{"type":"discussions","id":"70","attributes":{"title":"SpellScript : le sort \u0022Eclat lunaire\u0022","slug":"70-spellscript-le-sort-eclat-lunaire","commentCount":1,"participantCount":1,"createdAt":"2021-02-18T21:19:28+00:00","lastPostedAt":"2021-02-18T21:19:28+00:00","lastPostNumber":1,"canReply":false,"canRename":false,"canDelete":false,"canHide":false,"isApproved":true,"isLocked":false,"canLock":false,"isSticky":false,"canSticky":false,"subscription":null,"canTag":false},"relationships":{"posts":{"data":[{"type":"posts","id":"116"}]},"tags":{"data":[{"type":"tags","id":"2"},{"type":"tags","id":"10"}]}}},"included":[{"type":"posts","id":"116","attributes":{"number":1,"createdAt":"2021-02-18T21:19:28+00:00","contentType":"comment","contentHtml":"\u003Ch1\u003E\u003Cstrong\u003ESpellScript : le sort \u0022Eclat lunaire\u0022\u003C\/strong\u003E\u003C\/h1\u003E\n\n\u003Ch2\u003ETutoriel par \u003Ca href=\u0022https:\/\/forum.open-wow.eu\/u\/Galathil\u0022 class=\u0022UserMention\u0022\u003E@Galathil\u003C\/a\u003E\u003C\/h2\u003E\n\n\u003Cp\u003ECeci \u00e9tant mes premiers pas dans les SpellScript, il se peut que le code ne soit pas totalement correct et les explications impr\u00e9cises.\u003C\/p\u003E\n\n\u003Cp\u003ELecteurs avertis, soyez indulgents et pr\u00e9f\u00e9rez m\u0027expliquer en priv\u00e9 pour rendre ce tuto plus clair par la suite.\u003C\/p\u003E\n\n\u003Cp\u003ED\u00e9veloppement d\u0027un SpellScript : Eclat Lunaire\u003C\/p\u003E\n\n\u003Cp\u003E\u003Cem\u003ESommaire :\u003C\/em\u003E\u003C\/p\u003E\n\n\u003Cul\u003E\u003Cli\u003EIntroduction\u003C\/li\u003E\n\u003Cli\u003ESympt\u00f4mes\u003C\/li\u003E\n\u003Cli\u003ELa recherche d\u0027informations\u003C\/li\u003E\n\u003Cli\u003ELe script\u003C\/li\u003E\n\u003Cli\u003EExplications\u003C\/li\u003E\n\u003Cli\u003ERemerciements\u003C\/li\u003E\n\u003Cli\u003EAide, id\u00e9es, suggestions, critiques\u003C\/li\u003E\u003C\/ul\u003E\n  \u003Cbr\u003E\n\n\u003Ch3\u003EIntroduction\u003C\/h3\u003E\n\n\u003Cp\u003ECe tutoriel vise \u00e0 vous donner quelques bonnes pratiques afin de r\u00e9aliser vos SpellScript au travers d\u0027un exemple.\u003C\/p\u003E\n\n\u003Cp\u003ELa d\u00e9marche de r\u00e9alisation est toute aussi importante que le r\u00e9sultat final, soyez attentifs.\u003C\/p\u003E\n\n\u003Cp\u003ELa version de TrinityCore utilis\u00e9e est la suivante : \u003Ca href=\u0022https:\/\/github.com\/TrinityCore\/TrinityCore\/releases\/tag\/6.2.3%2F20886\u0022 rel=\u0022 nofollow ugc\u0022\u003ETrinityCore 6.2.3\u003C\/a\u003E\u003C\/p\u003E\n\n\u003Ch3\u003ESympt\u00f4mes\u003C\/h3\u003E\n\n\u003Cp\u003ECeci est un rapport que vous pouvez recevoir d\u0027un joueur :\u003C\/p\u003E\n\n\u003Cpre\u003E\u003Ccode\u003EBonjour,\n\nLe sort \u0022Eclat Lunaire\u0022 de mon druide ne fonctionne pas. Je choppe bien l\u0027aggro de la cr\u00e9ature mais le dot n\u0027est pas appliqu\u00e9. De m\u00eame, le cout en mana n\u0027est pas d\u00e9bit\u00e9.\n\nBien cordialement,\nun joueur\u003C\/code\u003E\u003Cscript async=\u0022\u0022 crossorigin=\u0022anonymous\u0022 data-hljs-style=\u0022github-gist\u0022 integrity=\u0022sha384-eud4nQrKZMwcYak7or3J5ZPJx1x4HRe8iTTHJy1SUVrDD+fP30Bo\/F8OSdQJpk8d\u0022 onload=\u0022hljsLoader.highlightBlocks(this.parentNode)\u0022 src=\u0022https:\/\/cdn.jsdelivr.net\/gh\/s9e\/hljs-loader@1.0.18\/loader.min.js\u0022\u003E\u003C\/script\u003E\u003C\/pre\u003E\n\n\u003Ch3\u003ELa recherche d\u0027informations\u003C\/h3\u003E\n\n\u003Cp\u003EA premi\u00e8re vue, il semble que le sort ne soit pas trait\u00e9 par le serveur ou partiellement ! Nous allons rep\u00e9rer l\u0027ID du sort concern\u00e9.Pour cela deux m\u00e9thodes :\u003C\/p\u003E\n\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003Ewowhead\u00a0\u003C\/strong\u003E: On recherche les sorts du druide pour isoler \u0022Eclat Lunaire\u0022, l\u0027id se trouve dans l\u0027url\u003C\/p\u003E\u003C\/li\u003E\n  \n\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003ECommande lookup\u003C\/strong\u003E : Sur un personnage druide avec le sort de connu, gr\u00e2ce \u00e0 la commande \u0022.lookup spell Eclat lunaire\u0022. L\u0027un des ids portera la notion \u0022know\u0022, c\u0027est celui que l\u0027on recherche.\u003C\/p\u003E\u003C\/li\u003E\u003C\/ul\u003E\n  \u003Cbr\u003E\n\n\u003Cp\u003EDans les deux cas, nous tombons sur un premier id : \u0026lt;mark\u0026gt;8921\u0026lt;\/mark\u0026gt;.\u003C\/p\u003E\n\n\u003Cp\u003EPour savoir si le sort est d\u00e9j\u00e0 trait\u00e9 par le core (ou tout au moins une portion) faites une recherche dans les sources avec les mots clefs \u0022moonfire\u0022 ou \u0022\u0026lt;mark\u0026gt;8921\u0026lt;\/mark\u0026gt;\u0022. De m\u00eame, recherchez dans la table \u003Cstrong\u003Eworld.spell_script_names\u003C\/strong\u003E.\u003C\/p\u003E\n\n\u003Cp\u003EVous ne trouverez rien de concluant.\u003C\/p\u003E\n\n\u003Cp\u003EPour avoir un peu plus d\u0027informations sur le sort, nous allons utiliser **SpellWork **propos\u00e9 par TrinityCore ici : \u003Ca href=\u0022https:\/\/github.com\/TrinityCore\/spellwork_cs\u0022 rel=\u0022 nofollow ugc\u0022\u003ESpellWork\u003C\/a\u003E .\u003C\/p\u003E\n\n\u003Cp\u003EIl vous suffit de lancer la solution \u0022SpellWork.sln\u0022 et de la g\u00e9n\u00e9rer (N\u00e9cessite Visual Studio 2015 si vous \u00eates sous Windows).\u003C\/p\u003E\n\n\u003Cp\u003EL\u0027ex\u00e9cutable sera positionn\u00e9 dans \u0022bin\/debug\u0022.\u003Cbr\u003E\nAu d\u00e9marrage, s\u00e9lectionnez le dossier de vos \u0022DBC\/votre_langue\u0022.\u003C\/p\u003E\n\n\u003Cp\u003EEn effectuant une recherche sur l\u0027id de sort \u0026lt;mark\u0026gt;8921\u0026lt;\/mark\u0026gt;, nous obtenons un tas d\u0027informations dans la colonne de gauche.Vous pouvez observer que le sort \u00e0 un effet DUMMY, c\u0027est \u00e0 dire qu\u0027il ne fait rien du tout lui m\u00eame (en bas du cadre).\u003C\/p\u003E\n\n\u003Cp\u003EEn regardant de plus pr\u00eat la description du sort, on peut voir un autre ID apparaitre : \u0026lt;mark\u0026gt;164812\u0026lt;\/mark\u0026gt; qui semble \u00eatre le bon sort !\u003C\/p\u003E\n\n\u003Cp\u003E\u003Cstrong\u003EComment \u00eatre s\u00fbr de cela?\u003C\/strong\u003E\u003C\/p\u003E\n\n\u003Cp\u003EEn jeu, s\u00e9lectionnez un monstre et tapez la commande \u0022.cast id_du_sort\u0022 pour tester les deux ids. Observez comme 164812 semble faire le job, c\u0027est tout bon !\u003C\/p\u003E\n\n\u003Cp\u003ENous allons maintenant cr\u00e9er notre SpellScript !\u003C\/p\u003E\n\n\u003Ch3\u003ELe script\u003C\/h3\u003E\n\n\u003Cp\u003EScript \u00e0 ajouter dans \u0022\\src\\server\\scripts\\Spells\\spell_druid.cpp\u0022 :\u003C\/p\u003E\n\n\u003Cpre\u003E\u003Ccode class=\u0022language-cpp\u0022\u003E\/\/ 8921 - Moonfire (Dummy)\nclass spell_dru_moonfire : public SpellScriptLoader\n{\npublic:\nspell_dru_moonfire() : SpellScriptLoader(\u0022spell_dru_moonfire\u0022) { }\n\nclass spell_dru_moonfire_SpellScript : public SpellScript\n{\nPrepareSpellScript(spell_dru_moonfire_SpellScript);\n\nenum\n{\nSPELL_DRUID_MOONFIRE_DAMAGE = 164812\n};\n\nbool Load() override\n{\nif (GetCaster() \u0026amp;\u0026amp; GetCaster()-\u0026gt;GetTypeId() != TYPEID_PLAYER)\nreturn false;\n\nreturn true;\n}\n\nvoid HandleOnHit()\n{\nUnit* caster = GetCaster();\nUnit* target = GetHitUnit();\n\nif (!caster || !target)\nreturn;\n\ncaster-\u0026gt;CastSpell(target, SPELL_DRUID_MOONFIRE_DAMAGE, true);\n}\n\nvoid Register() override\n{\nOnHit += SpellHitFn(spell_dru_moonfire_SpellScript::HandleOnHit);\n}\n};\n\nSpellScript* GetSpellScript() const override\n{\nreturn new spell_dru_moonfire_SpellScript();\n}\n};\u003C\/code\u003E\u003Cscript async=\u0022\u0022 crossorigin=\u0022anonymous\u0022 data-hljs-style=\u0022github-gist\u0022 integrity=\u0022sha384-eud4nQrKZMwcYak7or3J5ZPJx1x4HRe8iTTHJy1SUVrDD+fP30Bo\/F8OSdQJpk8d\u0022 onload=\u0022hljsLoader.highlightBlocks(this.parentNode)\u0022 src=\u0022https:\/\/cdn.jsdelivr.net\/gh\/s9e\/hljs-loader@1.0.18\/loader.min.js\u0022\u003E\u003C\/script\u003E\u003C\/pre\u003E\n\n\u003Cp\u003EN\u0027oubliez pas d\u0027ajouter l\u0027initialisation tout en bas du fichier (pour que le core charge bien le script !)\u003C\/p\u003E\n\n\u003Cpre\u003E\u003Ccode class=\u0022language-cpp\u0022\u003Evoid AddSC_druid_spell_scripts()\n{\n(...)\nnew spell_dru_moonfire();\n(...)\n}\u003C\/code\u003E\u003Cscript async=\u0022\u0022 crossorigin=\u0022anonymous\u0022 data-hljs-style=\u0022github-gist\u0022 integrity=\u0022sha384-eud4nQrKZMwcYak7or3J5ZPJx1x4HRe8iTTHJy1SUVrDD+fP30Bo\/F8OSdQJpk8d\u0022 onload=\u0022hljsLoader.highlightBlocks(this.parentNode)\u0022 src=\u0022https:\/\/cdn.jsdelivr.net\/gh\/s9e\/hljs-loader@1.0.18\/loader.min.js\u0022\u003E\u003C\/script\u003E\u003C\/pre\u003E\n\n\u003Cp\u003EEnfin, pour que le core puisse lier votre script au sort \u0026lt;mark\u0026gt;8921\u0026lt;\/mark\u0026gt;, ajoutez une ligne dans la table \u003Cstrong\u003Eworld.spell_script_names\u003C\/strong\u003E :\u003C\/p\u003E\n\n\u003Cpre\u003E\u003Ccode class=\u0022language-sql\u0022\u003EREPLACE INTO `spell_script_names` (`spell_id`, `ScriptName`) VALUES (8921, \u0027spell_dru_moonfire\u0027);\u003C\/code\u003E\u003Cscript async=\u0022\u0022 crossorigin=\u0022anonymous\u0022 data-hljs-style=\u0022github-gist\u0022 integrity=\u0022sha384-eud4nQrKZMwcYak7or3J5ZPJx1x4HRe8iTTHJy1SUVrDD+fP30Bo\/F8OSdQJpk8d\u0022 onload=\u0022hljsLoader.highlightBlocks(this.parentNode)\u0022 src=\u0022https:\/\/cdn.jsdelivr.net\/gh\/s9e\/hljs-loader@1.0.18\/loader.min.js\u0022\u003E\u003C\/script\u003E\u003C\/pre\u003E\n\n\u003Cp\u003EVous ne comprenez rien? Pas de soucis, passons \u00e0 l\u0027explication.\u003C\/p\u003E\n\n\u003Ch3\u003EExplications\u003C\/h3\u003E\n\n\u003Cp\u003EDans cette partie, nous allons analyser le code compos\u00e9 pr\u00e9c\u00e9demment :\u003C\/p\u003E\n\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003ELa structure globale\u003C\/strong\u003E : Comme vous le voyez, nous avons une premi\u00e8re classe h\u00e9ritant de SpellScriptLoader et une classe interne h\u00e9ritant de SpellScript. Cette architecture au premier abord d\u00e9routante vise \u00e0 simplifier les choses dans le cas ou il faudrait ajouter un AuraScript associ\u00e9 au SpellScript. Dans ce cas il suffira de cr\u00e9er une seconde classe interne.\u003C\/p\u003E\u003C\/li\u003E\n  \n\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EAura ou SpellScript ?\u003C\/strong\u003E Un SpellScript est un script de sort simple sans effet de dur\u00e9e (dot ou buff), contrairement \u00e0 un AuraScript qui donne acc\u00e8s \u00e0 des m\u00e9thodes pour g\u00e9rer les sors sur la dur\u00e9e.\u003C\/p\u003E\u003C\/li\u003E\n  \n\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003ELe constructeur\u003C\/strong\u003E : construction de l\u0027objet parent en indiquant le nom de la classe enfant.\u003C\/p\u003E\u003C\/li\u003E\n  \n\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EL\u0027enum\u003C\/strong\u003E : De mani\u00e8re g\u00e9n\u00e9rale, quand on manipule des ids, il est commun d\u0027utiliser des ENUM, cela rend le code plus lisible et si l\u0027id change, vous ne le changez qu\u0027a un seul endroit dans le code !\u003C\/p\u003E\u003C\/li\u003E\n  \n\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EM\u00e9thode load()\u003C\/strong\u003E : doit retourner un bool\u00e9en pour d\u00e9terminer si toutes les conditions requises sont r\u00e9unies pour ex\u00e9cuter le script. Ici, nous v\u00e9rifions que le lanceur de sort est bien un joueur.\u003C\/p\u003E\u003C\/li\u003E\n  \n\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EM\u00e9thode HandleOnHit()\u003C\/strong\u003E : le nom de la m\u00e9thode importe peu, vous verrez pourquoi plus bas. On va tout simplement lancer le bon sort (164812) sur la victime qui est la cible s\u00e9lectionn\u00e9e. Notez que l\u0027on v\u00e9rifie l\u0027existence des pointeurs, c\u0027est plus propre et \u00e9vite les exceptions et donc un crash potentiel du serveur.\u003C\/p\u003E\u003C\/li\u003E\n  \n\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EM\u00e9thode register()\u003C\/strong\u003E : comme son nom l\u0027indique, elle enregistre la pile d\u0027\u00e9v\u00e8nements \u00e0 lancer. On demande donc d\u0027ajouter la m\u00e9thode pr\u00e9c\u00e9demment cr\u00e9\u00e9 \u00e0 la pile d\u0027appel \u0022onHit\u0022.\u003C\/p\u003E\u003C\/li\u003E\n  \n\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EM\u00e9thode GetSpellScript()\u003C\/strong\u003E : qui est simplement le point d\u0027appel pour instancier notre classe interne. N\u00e9cessaire pour le SpellScriptLoader.\u003C\/p\u003E\u003C\/li\u003E\u003C\/ul\u003E\n  \u003Cbr\u003E\n\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EOn ajoute l\u0027instanciation de la classe tout en bas de \u0022spell_druid.cpp\u0022, sans quoi votre code ne sera jamais charg\u00e9 !\u003C\/p\u003E\u003C\/li\u003E\n  \n\u003Cli\u003E\u003Cp\u003EOn ajoute une ligne dans la table \u003Cstrong\u003Eworld.spell_script_names\u003C\/strong\u003E pour indiquer au serveur de lancer notre script quand le sort \u0022Eclat lunaire\u0022 est appel\u00e9.\u003C\/p\u003E\u003C\/li\u003E\n  \n\u003Cli\u003E\u003Cp\u003ECompilez, testez et admirez le r\u00e9sultat !\u003C\/p\u003E\u003C\/li\u003E \u003C\/ul\u003E\n  \u003Cbr\u003E\n\n\u003Ch3\u003ERemerciements\u003C\/h3\u003E\n\n\u003Cp\u003EJe remercie chaleureusement @Traesh pour son aide et ses conseils qui m\u0027ont permis de d\u00e9velopper ce script et vous le proposer ici.\u003C\/p\u003E\n\n\u003Ch3\u003EAide, id\u00e9es, suggestions, critiques\u003C\/h3\u003E\n\n\u003Cp\u003ESi vous avez des soucis avec le script, merci de cr\u00e9er une demande d\u0027aide dans la section appropri\u00e9e, en indiquant que vous avez suivi ce tutoriel.\u003C\/p\u003E\n\n\u003Cp\u003EPour les id\u00e9es, suggestions et critiques, pr\u00e9f\u00e9rez me contacter par MP? j\u0027\u00e9diterai le tutoriel en cons\u00e9quence.\u003C\/p\u003E\n\n\u003Cp\u003EEncore une fois, ce sont mes premiers pas, soyez indulgents !\u003C\/p\u003E","editedAt":"2021-02-18T21:19:56+00:00","canEdit":false,"canDelete":false,"canHide":false,"isApproved":true,"canApprove":false,"canFlag":false,"canLike":false},"relationships":{"discussion":{"data":{"type":"discussions","id":"70"}},"user":{"data":{"type":"users","id":"2"}},"editedUser":{"data":{"type":"users","id":"2"}},"likes":{"data":[]},"mentionedBy":{"data":[]}}},{"type":"users","id":"2","attributes":{"username":"iThorgrim","displayName":"iThorgrim","avatarUrl":"https:\/\/forum.open-wow.eu\/assets\/avatars\/m2uNfA3ykacYo3KQ.png","slug":"iThorgrim","joinTime":null,"discussionCount":21,"commentCount":30,"canEdit":false,"canDelete":false,"lastSeenAt":"2021-02-18T21:19:56+00:00","canSuspend":false},"relationships":{"groups":{"data":[{"type":"groups","id":"1"},{"type":"groups","id":"4"}]}}},{"type":"groups","id":"1","attributes":{"nameSingular":"Administrateur","namePlural":"Administrateurs","color":"#B72A2A","icon":"fas fa-wrench","isHidden":0}},{"type":"groups","id":"4","attributes":{"nameSingular":"Mod\u00e9rateur","namePlural":"Mod\u00e9rateurs","color":"#80349E","icon":"fas fa-bolt","isHidden":0}},{"type":"tags","id":"2","attributes":{"name":"Tutoriels","description":"","slug":"tutoriels","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":52,"position":2,"defaultSort":null,"isChild":false,"isHidden":false,"lastPostedAt":"2021-02-18T21:19:28+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":47}},{"type":"tags","id":"10","attributes":{"name":"C++","description":"","slug":"tuto-cpp","color":"#e74c3c","backgroundUrl":null,"backgroundMode":null,"icon":"","discussionCount":10,"position":1,"defaultSort":null,"isChild":true,"isHidden":false,"lastPostedAt":"2021-02-18T21:19:28+00:00","canStartDiscussion":false,"canAddToDiscussion":false,"postCount":7}}]}});
                flarum.core.app.bootExtensions(flarum.extensions);
                flarum.core.app.boot();
            } catch (e) {
                var error = document.getElementById('flarum-loading-error');
                error.innerHTML += document.getElementById('flarum-content').textContent;
                error.style.display = 'block';
                throw e;
            }
        </script>
</body>
</html>
